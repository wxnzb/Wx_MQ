## 1
```
func (p *Partition) Pub(cl *Client) {
	//要是客户端活着，先得到消息
	for {
		cl.rmu.RLock()
		//cl.state=="alive写成这样可以吗
		if cl.state == ALIVE {
			name := cl.name
			cl.rmu.RUnlock()
			p.rmu.RLock()
			offset := p.consumer_offset[name]
			msg := p.queue[offset]
			p.rmu.Unlock()
			ret := cl.Pub(msg)
			if ret {
				p.rmu.Lock()
				p.consumer_offset[name]=offset+1
				p.rmu.Unlock()
			}
		} else {
			cl.rmu.Unlock()
			time.Sleep(5 * time.Second)
		}
	}

}
```
- p.consumer_offset[name]=offset+1之前好奇为什么这个代码不能写成p.consumer_offset[name]++,go语言根本就没有这种语法