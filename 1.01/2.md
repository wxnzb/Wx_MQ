## 1
```
type RPCServer struct {
	logging struct{
		logger Logger
        debug  bool//是否开启调试日志
		trace  bool//是否开启trace日志
		traceSysAcc bool//trace system account是否开启系统用户的trace日志
		sync.RWMutex
	}
	server Server
}
```
- bool是正确的，但是Go的atomic对bool不太方便操作，所以用int32
- 这里logging是RPCServer的字段名，后面的struct{}是匿名结构体
- 那为啥没给sync.RWMutex起个名字？怎样使用他？
- Go 的匿名字段机制，会把它的方法提升到父结构体logging上来访问
```
s RPCServer
s.logging.Lock()
s.logging.Unlock()
s.logging.RLock()
s.logging.RUnlock()
```
## 2
```
type Logger interface{
	//调试
	Debugf(format string,args ...interface{})
	//追踪
	Tracef(format string,args ...interface{})
	//正常信息
	Noticef(format string,args ...interface{})
	//警告
	Warnf(format string,args ...interface{})
	//错误
	Errorf(format string,args ...interface{})
	//致命错误
	Fatalf(format string,args ...interface{})
}
func(s *RPCServer)executeLogCall(f func(logger Logger,format string,args ...interface{}),format string,args ...interface{}){
	s.logging.Lock()
	defer s.logging.Unlock()
	f(s.logging.logger,format,args)
}
//实现关于RPCServer的Logger接口
//调试
func (s *RPCServer)Debugf(format string, args ...interface{}) {
	//为啥这个不能直接写成s.logging.Logger.Debugf(format,args)
	s.executeLogCall(func(logger Logger, format string, args ...interface{}) {
		logger.Debugf(format, args...)
	}, format, args...)
}
```
- 为啥这个不能直接写成s.logging.Logger.Debugf(format,args)
- 你很棒呀，可以但是要加锁，写成这样，不然不安全
```
s.logging.Lock()
defer s.logging.Unlock()
s.logging.logger.Debugf(format, args...)
```
- 但是这样每个函数中都要写，很麻烦，因此统一写了一个executeLogCall函数
## 3
-  atomic.LoadInt32(&s.logging.trace)他的用法是怎样的，什么意思
-  以原子操作的方式读取 s.logging.trace 的值，确保并发环境下读取是安全的
## 4
```
//这个在api "Wx_MQ/kitex_gen/api"的operations.go文件中，我已经包含了，但是在server下面的rpcserver.gp中还是找不到*PushRequest
type PushRequest struct {
	ProducerId int64  `thrift:"producerId,1" frugal:"1,default,i64" json:"producerId"`
	Topic      string `thrift:"topic,2" frugal:"2,default,string" json:"topic"`
	Key        string `thrift:"key,3" frugal:"3,default,string" json:"key"`
	Message    string `thrift:"message,4" frugal:"4,default,string" json:"message"`
}
```
- 用了包名+符号（比如 api.PushRequest），才算真正用了这个包