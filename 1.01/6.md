## 1
- 我想知道 c.hashKey(node + strconv.Itoa(0))这个和 c.hashKey(node )一样吗
- 不一样
- c.hashKey(node) 实际等价于：
- c.hashKey("192.168.1.100:8889")
- 而 c.hashKey(node + strconv.Itoa(0)) 实际等价于：
- c.hashKey("192.168.1.100:88890")
## 2
```
// 将消费者从订阅队列里面移除
func (sub *SubScription) shutDownConsumer(consumer_name string) string {
	sub.rmu.Lock()
	switch sub.option {
	case TOPIC_NIL_PTP:
		{
			sub.groups[0].DownConsumer(consumer_name)
			sub.consistent.Reduce(consumer_name)

		}
	case TOPIC_KEY_PSB:
		{
			for _, group := range sub.groups {
				group.DownConsumer(consumer_name)
			}
		}
	}
	sub.rmu.Unlock()
	sub.Rebalance()
	return sub.topic_name
}
```
- sub.consistent.Reduce(consumer_name)是不是这句只针对点对点
- 是的
- 点对点模式（TOPIC_NIL_PTP）的特点：
- 每条消息只能被一个消费者消费。
- 所有消费者通过一致性哈希（Consistent）来做负载均衡。
- 因此需要在 sub.consistent 中维护每个消费者的虚拟节点。